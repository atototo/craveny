# 📊 Craveny Dashboard UX 설계 문서

## 1. 개요

**목적**: 주가 예측 시스템의 모든 데이터를 시각화하고 관리할 수 있는 웹 대시보드

**사용자**: 투자자, 애널리스트, 시스템 관리자

**핵심 가치**:
- 실시간 예측 모니터링
- 과거 예측 히스토리 분석
- 종목별 트렌드 파악
- 시스템 성능 관리

---

## 2. 페이지 구조

```
/                    → 메인 대시보드 (실시간 모니터링)
/predictions         → 예측 히스토리
/predictions/:id     → 예측 상세
/stocks              → 종목별 분석
/stocks/:code        → 종목 상세
/statistics          → 통계 및 분석
```

---

## 3. 페이지별 상세 설계

### 3.1 메인 대시보드 (`/`)

**목적**: 실시간 예측 현황을 한눈에 파악

#### 레이아웃
```
┌─────────────────────────────────────────────────────────┐
│  Header (로고, 네비게이션, 시스템 상태)                 │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐       │
│  │   오늘의    │ │   평균      │ │   총 예측   │       │
│  │   예측 수   │ │  신뢰도     │ │    건수     │       │
│  │     15      │ │    78%      │ │    347      │       │
│  └─────────────┘ └─────────────┘ └─────────────┘       │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📊 예측 방향 분포 (도넛 차트)                  │    │
│  │     - 상승: 60%                                  │    │
│  │     - 하락: 25%                                  │    │
│  │     - 유지: 15%                                  │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  🔔 최근 예측 (실시간 업데이트)                │    │
│  │                                                   │    │
│  │  📈 삼성전자 (005930)            ⏰ 2분 전      │    │
│  │  예측: 상승 (+2.5%)  신뢰도: 85%               │    │
│  │  [상세보기]                                      │    │
│  │  ─────────────────────────────────              │    │
│  │  📉 SK하이닉스 (000660)          ⏰ 5분 전      │    │
│  │  예측: 하락 (-1.2%)  신뢰도: 72%               │    │
│  │  [상세보기]                                      │    │
│  │                                                   │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📡 시스템 상태                                  │    │
│  │  • 크롤러: ✅ 정상 (마지막 실행: 3분 전)        │    │
│  │  • 주가 수집: ✅ 정상 (10/10 종목)              │    │
│  │  • 알림 발송: ✅ 정상 (성공률: 98%)             │    │
│  │  • 캐시 히트율: 67%                              │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

#### 주요 컴포넌트
1. **KPI 카드** (3개)
   - 오늘의 예측 수
   - 평균 신뢰도
   - 총 예측 건수

2. **예측 방향 분포 차트** (도넛 차트)
   - 상승/하락/유지 비율

3. **최근 예측 테이블**
   - 실시간 업데이트 (10초마다)
   - 종목명, 예측 방향, 신뢰도
   - 상세보기 버튼

4. **시스템 상태 패널**
   - 크롤러, 주가 수집, 알림 상태
   - 캐시 히트율

#### 필요한 API
```typescript
GET /api/dashboard/summary
→ {
  today_predictions: number,
  average_confidence: number,
  total_predictions: number,
  direction_distribution: { up: number, down: number, hold: number }
}

GET /api/predictions/recent?limit=10
→ [{ id, stock_code, stock_name, prediction, confidence, created_at }]

GET /api/system/status
→ { crawler, stock_collector, notifier, cache_hit_rate }
```

---

### 3.2 예측 히스토리 (`/predictions`)

**목적**: 전체 예측 기록을 검색하고 필터링

#### 레이아웃
```
┌─────────────────────────────────────────────────────────┐
│  Header                                                   │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  📊 예측 히스토리                                        │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  🔍 검색 및 필터                                 │    │
│  │                                                   │    │
│  │  [검색어 입력]  [종목선택▼]  [날짜범위]  [예측▼] │    │
│  │                                        [검색]      │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  날짜       종목      뉴스제목      예측   신뢰도 │    │
│  │  ─────────────────────────────────────────────  │    │
│  │  11/01  삼성전자  신규 공정...   📈+2.5%  85%   │    │
│  │  10/31  SK하이닉스 실적 발표...  📉-1.2%  72%   │    │
│  │  10/31  카카오    AI 서비스...   📈+3.5%  80%   │    │
│  │                                       [더보기▼]   │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  [1] [2] [3] ... [10]  (페이지네이션)                   │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

#### 주요 기능
1. **검색**
   - 키워드 검색 (뉴스 제목/내용)
   - 종목 필터
   - 날짜 범위 선택
   - 예측 방향 필터 (상승/하락/유지)

2. **정렬**
   - 최신순 (기본)
   - 신뢰도 높은순
   - 신뢰도 낮은순

3. **페이지네이션**
   - 페이지당 20건
   - 무한 스크롤 옵션

#### 필요한 API
```typescript
GET /api/predictions?
  page=1&
  limit=20&
  search=검색어&
  stock_code=005930&
  start_date=2024-10-01&
  end_date=2024-11-01&
  prediction=up&
  sort_by=created_at&
  sort_order=desc
```

---

### 3.3 예측 상세 (`/predictions/:id`)

**목적**: 개별 예측의 모든 정보를 상세히 보여줌

#### 레이아웃
```
┌─────────────────────────────────────────────────────────┐
│  Header                                                   │
├─────────────────────────────────────────────────────────┤
│  [← 뒤로가기]                                            │
│                                                           │
│  📈 삼성전자 (005930) - 예측 #347                        │
│  ⏰ 2025-11-01 15:30                                     │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📰 뉴스 정보                                    │    │
│  │  제목: 삼성전자, 신규 3나노 공정 개발 성공      │    │
│  │  출처: 네이버 (한국경제)                         │    │
│  │  내용: [뉴스 본문 전체 표시]                     │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  💰 현재 주가 (예측 시점)                       │    │
│  │  • 현재가: 85,000원 (📈 +2.3%)                  │    │
│  │  • 거래량: 12,500,000주                          │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  🔮 예측 결과                                    │    │
│  │                                                   │    │
│  │  예측 방향: 📈 상승                              │    │
│  │  신뢰도: 🟢 85%                                  │    │
│  │                                                   │    │
│  │  📅 기간별 예측:                                 │    │
│  │  • T+1일: +2.5% 상승 예상                        │    │
│  │  • T+3일: +5.3% 상승 예상                        │    │
│  │  • T+5일: +7.8% 상승 예상                        │    │
│  │                                                   │    │
│  │  💡 예측 근거:                                   │    │
│  │  과거 유사한 뉴스에서 T+5일 평균 7.8% 상승...   │    │
│  │  [전체 근거 텍스트 표시]                         │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📚 유사 뉴스 (5건)                              │    │
│  │                                                   │    │
│  │  1. 삼성전자, 2나노 공정... (유사도: 95%)       │    │
│  │     주가 변동: T+1일 +2.3%, T+3일 +5.1%...      │    │
│  │                                                   │    │
│  │  2. SK하이닉스, HBM3 양산... (유사도: 88%)      │    │
│  │     주가 변동: T+1일 +1.8%, T+3일 +4.2%...      │    │
│  │                                                   │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  🤖 메타 정보                                    │    │
│  │  • 모델: gpt-4o                                  │    │
│  │  • 캐시 사용: 아니오                             │    │
│  │  • 예측 ID: #347                                 │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

#### 필요한 API
```typescript
GET /api/predictions/:id
→ {
  id, news, stock_info, prediction, similar_news, metadata
}
```

---

### 3.4 종목별 분석 (`/stocks`)

**목적**: 종목별 예측 통계 및 트렌드 분석

#### 레이아웃
```
┌─────────────────────────────────────────────────────────┐
│  Header                                                   │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  📈 종목별 분석                                          │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  종목       예측횟수  평균신뢰도  상승/하락/유지 │    │
│  │  ─────────────────────────────────────────────  │    │
│  │  삼성전자    127건    82%      70% / 20% / 10%  │    │
│  │  SK하이닉스   89건    78%      65% / 25% / 10%  │    │
│  │  카카오       45건    75%      55% / 30% / 15%  │    │
│  │                                     [더보기▼]     │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📊 종목별 예측 횟수 차트 (바 차트)             │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

#### 필요한 API
```typescript
GET /api/stocks/summary
→ [{ stock_code, stock_name, prediction_count, avg_confidence, distribution }]
```

---

### 3.5 종목 상세 (`/stocks/:code`)

**목적**: 특정 종목의 상세 분석 및 주가 차트

#### 레이아웃
```
┌─────────────────────────────────────────────────────────┐
│  Header                                                   │
├─────────────────────────────────────────────────────────┤
│  [← 뒤로가기]                                            │
│                                                           │
│  📈 삼성전자 (005930)                                    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  💰 현재 주가                                    │    │
│  │  85,000원 (📈 +2.3%)                             │    │
│  │  거래량: 12,500,000주                             │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📊 주가 차트 (30일)                             │    │
│  │  [캔들스틱 차트 + 예측 시점 마커]                │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📈 예측 통계                                    │    │
│  │  • 총 예측: 127건                                │    │
│  │  • 평균 신뢰도: 82%                              │    │
│  │  • 상승 예측: 70% (89건)                         │    │
│  │  • 하락 예측: 20% (25건)                         │    │
│  │  • 유지 예측: 10% (13건)                         │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  🔔 이 종목의 최근 예측                          │    │
│  │  [예측 목록 테이블]                              │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

#### 필요한 API
```typescript
GET /api/stocks/:code
→ { stock_info, price_history, prediction_stats, recent_predictions }

GET /api/stocks/:code/prices?days=30
→ [{ date, open, high, low, close, volume }]
```

---

### 3.6 통계 및 분석 (`/statistics`)

**목적**: 시스템 전체 통계 및 성능 분석

#### 레이아웃
```
┌─────────────────────────────────────────────────────────┐
│  Header                                                   │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  📊 통계 및 분석                                         │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📅 일별 예측 추이 (라인 차트, 30일)            │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  🎯 신뢰도 분포 (히스토그램)                    │    │
│  │  • 0-20%: 5건                                    │    │
│  │  • 20-40%: 12건                                  │    │
│  │  • 40-60%: 45건                                  │    │
│  │  • 60-80%: 120건                                 │    │
│  │  • 80-100%: 165건                                │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  💾 캐시 성능                                    │    │
│  │  • 히트율: 67%                                   │    │
│  │  • 총 요청: 1,234건                              │    │
│  │  • 캐시 히트: 827건                              │    │
│  │  • 캐시 미스: 407건                              │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │  📡 크롤러 통계                                  │    │
│  │  • 뉴스 수집: 347건                              │    │
│  │  • 성공률: 98%                                   │    │
│  │  • 주가 수집: 1,234건                            │    │
│  │  • 알림 발송: 89건 (성공: 87, 실패: 2)          │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

#### 필요한 API
```typescript
GET /api/statistics/daily?days=30
→ [{ date, prediction_count, avg_confidence }]

GET /api/statistics/confidence-distribution
→ { ranges: [{ min, max, count }] }

GET /api/statistics/crawler
→ { news, stocks, notifications }
```

---

## 4. 공통 UI 컴포넌트

### 4.1 Header
- 로고 (Craveny)
- 네비게이션 메뉴
  - 대시보드
  - 예측 히스토리
  - 종목 분석
  - 통계
- 시스템 상태 인디케이터 (🟢/🟡/🔴)
- 다크모드 토글

### 4.2 KPI Card
- 제목
- 값 (큰 숫자)
- 변화량 (증감 표시)
- 트렌드 아이콘

### 4.3 Data Table
- 정렬 기능
- 페이지네이션
- 검색 및 필터
- 행 클릭 → 상세 페이지

### 4.4 Chart Components
- 도넛 차트 (예측 방향 분포)
- 라인 차트 (시계열 추이)
- 바 차트 (종목별 비교)
- 캔들스틱 차트 (주가)

---

## 5. 필요한 백엔드 API 엔드포인트 (신규)

### 5.1 Dashboard API
```
GET /api/dashboard/summary          - 대시보드 요약 통계
GET /api/predictions/recent         - 최근 예측 목록
GET /api/system/status               - 시스템 상태
```

### 5.2 Predictions API (확장)
```
GET /api/predictions                 - 예측 목록 (필터링, 검색, 페이지네이션)
GET /api/predictions/:id             - 예측 상세
```

### 5.3 Stocks API
```
GET /api/stocks/summary              - 종목별 요약 통계
GET /api/stocks/:code                - 종목 상세 정보
GET /api/stocks/:code/prices         - 종목 주가 히스토리
GET /api/stocks/:code/predictions    - 종목별 예측 목록
```

### 5.4 Statistics API
```
GET /api/statistics/daily            - 일별 통계
GET /api/statistics/confidence       - 신뢰도 분포
GET /api/statistics/crawler          - 크롤러 통계
```

### 5.5 News API
```
GET /api/news                        - 뉴스 목록
GET /api/news/:id                    - 뉴스 상세
```

---

## 6. 기술 스택

### 6.1 Frontend
- **Framework**: Next.js 14 (React, App Router, TypeScript)
- **Styling**: Tailwind CSS
- **UI Components**: shadcn/ui
- **Charts**: Recharts
- **Data Fetching**: TanStack Query (React Query)
- **State Management**: Zustand (필요 시)
- **Date Handling**: date-fns
- **Icons**: Lucide React

### 6.2 Backend (확장)
- **Framework**: FastAPI (기존)
- **새 엔드포인트 추가 필요**

---

## 7. 반응형 디자인

### 7.1 Breakpoints
- Mobile: < 768px
- Tablet: 768px - 1024px
- Desktop: > 1024px

### 7.2 Mobile 최적화
- 햄버거 메뉴
- 카드 레이아웃 수직 배치
- 차트 간소화
- 테이블 → 카드 전환

---

## 8. 성능 최적화

### 8.1 Frontend
- 코드 스플리팅 (Next.js 자동)
- 이미지 최적화 (next/image)
- 데이터 캐싱 (TanStack Query)
- 가상 스크롤 (긴 목록)

### 8.2 Backend
- API 응답 캐싱
- 페이지네이션 (필수)
- 인덱싱 (DB 쿼리 최적화)

---

## 9. 접근성 (A11y)

- 키보드 네비게이션
- ARIA 라벨
- 적절한 대비율
- 스크린 리더 지원

---

## 10. 다음 단계

1. ✅ **UX 설계 검토** (현재)
2. ⏳ **API 엔드포인트 구현** (백엔드)
3. ⏳ **Next.js 프로젝트 셋업**
4. ⏳ **페이지 개발** (메인 → 히스토리 → 종목 → 통계)
5. ⏳ **테스트 및 배포**

---

## 11. 예상 일정

- API 구현: 1-2시간
- 프로젝트 셋업: 30분
- 메인 대시보드: 1-2시간
- 예측 히스토리: 1-2시간
- 종목 분석: 1-2시간
- 통계 페이지: 1시간
- 반응형 최적화: 1시간
- **총 예상 시간: 7-11시간**

---

## 12. 우선순위

**Phase 1** (MVP, 필수):
- 메인 대시보드
- 예측 히스토리 (목록만)
- 예측 상세

**Phase 2** (중요):
- 종목별 분석
- 통계 페이지

**Phase 3** (Nice-to-have):
- 고급 필터링
- 실시간 업데이트 (WebSocket)
- 알림 설정
- 백테스팅 결과
